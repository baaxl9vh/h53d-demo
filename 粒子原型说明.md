# 粒子交互原型说明

## 项目概述

这是一个基于 Vue 3 + Three.js 开发的移动端 H5 粒子交互原型，完美支持移动端和桌面端浏览。

## 技术栈

- **前端框架**: Vue 3.5 + TypeScript
- **3D 渲染**: Three.js
- **构建工具**: Vite
- **路由**: Vue Router
- **状态管理**: Pinia

## 已实现的功能

### ✅ 核心功能

1. **粒子系统**
   - 自动生成粒子纹理（圆形光晕）
   - 根据设备性能动态调整粒子数量
     - 低端设备: 2000 个粒子
     - 中端设备: 5000 个粒子
     - 高端设备: 10000 个粒子
   - 粒子颜色渐变（蓝色到紫色）
   - 粒子浮动和旋转动画

2. **交互效果**
   - 鼠标跟随效果（桌面端）
   - 触摸跟随效果（移动端）
   - 粒子对鼠标/触摸的响应（排斥效果）
   - 相机跟随鼠标移动

3. **响应式设计**
   - 完美适配移动端和桌面端
   - 响应式字体和布局
   - 优雅的欢迎界面
   - 实时性能监控（FPS、粒子数量、设备类型）

4. **移动端优化**
   - 触摸事件处理
   - 防止页面滚动
   - iOS Safari 特殊优化
   - 视口高度适配（使用 dvh）
   - 触摸高亮禁用

5. **性能优化**
   - 设备性能检测
   - 根据性能动态调整渲染质量
   - 移动端关闭抗锯齿
   - 像素比控制
   - WebGL 支持检测

## 项目结构

```
src/
├── three/                      # Three.js 相关
│   └── ParticleSystem.ts       # 粒子系统核心类
├── utils/                      # 工具函数
│   └── device.ts               # 设备检测工具
├── views/                      # 页面视图
│   └── ParticleView.vue        # 粒子交互页面
├── router/                     # 路由配置
│   └── index.ts
├── App.vue                     # 根组件
└── main.ts                     # 入口文件
```

## 如何运行

### 开发模式

```bash
npm run dev
```

访问: http://localhost:5173

### 构建生产版本

```bash
npm run build
```

### 预览生产构建

```bash
npm run preview
```

## 功能说明

### 1. 欢迎界面

- 美观的渐变标题
- "开始体验"按钮
- 根据设备类型显示不同提示
- 平滑的进入动画

### 2. 粒子交互

**桌面端:**

- 移动鼠标，粒子会排斥鼠标
- 相机会轻微跟随鼠标移动

**移动端:**

- 触摸屏幕移动，粒子会响应触摸位置
- 支持单指触摸交互

### 3. 信息面板

实时显示：

- 当前粒子数量
- 实时 FPS
- 设备类型和性能等级

### 4. 粒子效果

- 粒子持续旋转
- 粒子上下浮动
- 粒子颜色渐变
- 发光混合模式
- 边界循环

## 性能指标

### 桌面端

- **粒子数量**: 10000
- **目标 FPS**: 60
- **渲染分辨率**: 最高 2x

### 移动端（高端）

- **粒子数量**: 5000
- **目标 FPS**: 60
- **渲染分辨率**: 最高 2x

### 移动端（低端）

- **粒子数量**: 2000
- **目标 FPS**: 30-60
- **渲染分辨率**: 1x
- **关闭抗锯齿**

## 兼容性

### 浏览器支持

- ✅ Chrome 90+
- ✅ Safari 14+ (iOS 14+)
- ✅ Firefox 88+
- ✅ Edge 90+

### 设备支持

- ✅ iPhone (iOS 14+)
- ✅ Android (Chrome 90+)
- ✅ iPad
- ✅ Windows/Mac/Linux 桌面

### WebGL 要求

- 需要浏览器支持 WebGL
- 如果不支持，会显示降级提示

## 移动端特性

### 视口设置

```html
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
/>
```

### iOS 优化

- 全屏模式支持
- 状态栏透明
- 防止橡皮筋效果
- 100dvh 高度单位

### Android 优化

- 主题颜色设置
- 防止页面缩放
- 触摸高亮禁用

## 自定义配置

### 修改粒子数量

编辑 `src/utils/device.ts`:

```typescript
static getParticleCount(): number {
  const level = this.getPerformanceLevel()
  const counts = {
    low: 2000,      // 修改低端设备数量
    medium: 5000,   // 修改中端设备数量
    high: 10000     // 修改高端设备数量
  }
  return counts[level]
}
```

### 修改粒子颜色

编辑 `src/three/ParticleSystem.ts` 的 `createParticles` 方法:

```typescript
// 颜色渐变（从蓝色到紫色）
const color = new THREE.Color()
const hue = 0.55 + Math.random() * 0.15 // 修改色相范围
color.setHSL(hue, 0.8, 0.6) // 修改饱和度和亮度
```

### 修改背景颜色

编辑 `src/views/ParticleView.vue`:

```css
.particle-container {
  background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 50%, #16213e 100%);
  /* 修改渐变颜色 */
}
```

## 下一步开发建议

### 短期优化

1. 添加音效系统
2. 添加更多粒子形状
3. 添加场景切换动画
4. 添加更多交互模式

### 中期扩展

1. 从图片生成粒子形状
2. 从文字生成粒子形状
3. 粒子变形动画
4. 多场景滚动切换

### 长期规划

1. 3D 模型粒子化
2. 粒子爆炸效果
3. 粒子轨迹效果
4. 后处理效果（光晕、模糊）

## 常见问题

### Q: 移动端卡顿怎么办？

A: 系统会自动检测设备性能并调整粒子数量。如果还是卡顿，可以手动降低粒子数量。

### Q: 如何查看实时性能？

A: 左上角的信息面板会显示实时 FPS 和粒子数量。

### Q: 支持哪些浏览器？

A: 需要支持 WebGL 的现代浏览器，推荐使用 Chrome、Safari、Firefox 最新版本。

### Q: 如何部署到服务器？

A: 运行 `npm run build`，然后将 `dist` 目录部署到任何静态文件服务器。

## 参考资源

- [Three.js 官方文档](https://threejs.org/docs/)
- [Vue 3 文档](https://cn.vuejs.org/)
- [Vite 文档](https://cn.vitejs.dev/)
- [WebGL 最佳实践](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/WebGL_best_practices)

## 更新日志

### v1.0.0 (2025-10-22)

- ✅ 初始版本
- ✅ 基础粒子系统
- ✅ 鼠标/触摸交互
- ✅ 移动端优化
- ✅ 性能自适应
- ✅ 响应式设计

---

**开发者**: AI Assistant  
**日期**: 2025-10-22  
**技术栈**: Vue 3 + Three.js + TypeScript
